# team-1
Представляем проект мессенджера angermess.

[Деплой на Heroku](https://angermess.heroku.app/)

Серверная часть (back) написана на NodeJs с использованием веб-фреймворка Express и подключением к облачной базе данных MongoDB. Работает на 3001 порту.
Клиентская сторона (front) представляет собой React-приложение, работающее на порту localhost:3000. 

### Сервер

Для реализации серверной части нам понадобилось следующие библиотеки (dependencies из package.json):
- express - веб-фреймворк для node
- body-parser - middleware для обработки POST запросов
- connect-mongo, mongoose - для работы с базой данных
- morgan - вспомогательное средство для Node.js, предназначенное для логирования HTTP-запросов
- cookie-parser, express-session - работа с сессиями
- nodemailer - отправка писем с NodeJS
- ws, ws-express - работа с WebSocket
- bcryptjs - шифрование паролей

Для разработки мы использовали следующие пакеты (devDependencies из package.json):
- cross-env - единое объявление переменных окружения для Windows и Linux
- http-errors - создание HTTP ошибок
- eslint - инструмент, который позволяет проводить анализ качества кода, написанного на любом выбранном стандарте JavaScript
- nodemon - автоматичемкая перезагрузка сервера при внесении в него изменений

##### Файлы
- main-файл - app.js
- старт приложения - с node ./bin/www
- конфигурационный файл - config.js
- подключение к БД - database.js, models - схемы БД
- настройка SMTP сервера - nodemailer.js
- api routers 
- service.js - скрипты с функциями запросов к базе данных

##### База данных
Состоит из таблиц users (id, username, email,  password), dialogs - списка диалогов (id диалога, fromUser, toUser), sessions (информация о текущих сессиях)

### Клиент

Для разработки серверной части нам понадобились библиотеки:
- Установленные автоматически при создании приложения с помощью команды create-react-app
- axios - удобный способ азвимодействия с api-сервером
- react-router-dom - навигация внутри react-приложения

##### Файлы
- public - index.html, images - иконки логотипы и изображения
- src - app.js, index.js, setupProxy.js + папка components c компонениами:
    - app-header - заголовок
    - main-body - формы аутентификации и регистрации + messenger, состоящий из компонентов списка диалогов (или списка пользователей, найденных в базе данных) и компонентов текущего диалога

### Авторизация и регистрация

На данный момент реализовано:
- Формы регистрации, авторизации
- Валидация форм на фронте ( заполнены ли все поля, правильно ли заполнено поле email, соответствуют ли друг другу введенные при регистрауии пароли, имеет ли введенное имя пользователя минимально допустимую длинуу и. т. д )
- Проверки на серверной части (при регистрации - есть ли в базе данных пользователь с таким же email, при аутентификации - найден ли запрашиваемый пользователь в базе данных)
- Начало сессии при успешном входе в аккаунт
- Создание аккаунта, запись данных пользователя в базу данных
- Шифрование паролей, запись хеша пародя в БД
- Отправка письма c сервера SMTP на указанную почту при создании аккаунта
- Выход из аккаунта, уничтожение сессии

### Header

Заголовок включает в себя два режима работы: неавторизованный и авторизованный. В первом случае заглолвок показывает только логотип приложения, во втором случае - сообщение приветствия, отобразающий имя текщего пользователя и кнопку "Выйти" для перехода в неавторизованный режим и уничтожения сессии.

### Messenger
- Поле, где отображаются списки найденных пользователей или уже существующих диалогов:
    - Поиск пользователя по username для создания чата
    - Отображение списков диалогов, имеющихся у пользователя, который в данный момент времени авторизован в приложении
- Секция отпраки сообщений:
    - Добавление сообщения в диалог
    - Подгрузка сообщений по WebSocket (*)
